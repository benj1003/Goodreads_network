<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {  font-family: Arial;
	margin-left: auto;
  	margin-right: auto;
  	width: 100%;
	max-width: 1000px;
	
}
	
/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #aabfef ;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
	width:20%;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #678fed;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #4876df;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  -webkit-animation: fadeEffect 1s;
  animation: fadeEffect 1s;
}

/* Fade in tabs */
@-webkit-keyframes fadeEffect {
  from {opacity: 0;}
	
  to {opacity: 1;}
}

@keyframes fadeEffect {
  from {opacity: 0;}
  to {opacity: 1;}
}
  
* {box-sizing: border-box;}

.cont {
	position:relative;
	width:80%;
	margin-left: auto;
  margin-right: auto
	}
	
.container {
  position: relative;
  max-width: 400px;
} 
.column {
	position: relative;
  float: left;
  width:45%;
  padding: 5px;
}

/* Clearfix (clear floats) */
.row::after {
  content: "";
  clear: both;
  display: table;
}

.smallimage {
	position: relative;
	margin-left: auto;
  margin-right: auto;
  display: block;
  width:100%;
	max-width: 500px;
	}
	
.image {
  position: relative;
	margin-left: auto;
  margin-right: auto;
  display: block;
  width:100%;
}

.overlay {
  position: absolute; 
  bottom: 0; 
  background: rgb(0, 0, 0);
  background: rgba(0, 0, 0, 0.5); /* Black see-through */
  color: #f1f1f1; 
  width:100%;
  transition: .5s ease;
  opacity:0;
  color: white;
  font-size: 20px;
  padding: 20px;
  text-align: center;
}

.container:hover .overlay {
  opacity: 1;
}

.column:hover .overlay {
  opacity: 1;
}
	
.tab_content { background:#fff;padding:10px;width:100% }
.tabs li { display:inline;list-style:none }
.tabs a { background:#7c7c7c;color:#dadada;display:inline-block }
.tabs a.active { background:#e32d2d;color:#fff }
	
div.a {
  text-align: center;
}

div.b {
  text-align: left;
}

div.c {
  text-align: right;
}
	
* {
  box-sizing: border-box;
}

#table {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#customers td,#table th {
  padding: 8px;
}

#table tr:nth-child(even){background-color: #f2f2f2;}

#table tr:hover {background-color: #ddd;}

#table th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #7d7d7d;
  color: white;
}	

</style>
</head>
  
<!-- ************************************************************************************************************* -->
<!-- *************************************************BODY******************************************************** -->
<!-- ************************************************************************************************************* -->
<body>
<!-- ************* The tabs at the top ************* -->
<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'Home')"id="defaultOpen">Home</button>
  <button class="tablinks" onclick="openCity(event, 'About')">About</button>
  <button class="tablinks" onclick="openCity(event, 'Network')">Network</button>
  <button class="tablinks" onclick="openCity(event, 'Sentiment')">Text Analysis</button>
  <button class="tablinks" onclick="openCity(event, 'Code')">Code</button>
</div>

<!-- ************* Info on Home page ************* -->
<div id="Home" class="tabcontent">
	<h1> Some big title </h1>
	<div class="a">
		<p><em>Ever finished the greatest book ever and wondered “what’s next?” </em></p>
	</div>

	<div class="b">
		<p>One way to answer this question is to look at books that other readers of your greatest 
			book ever also read. But how are books related and recommended with each other? This 
			is what we have investigated!</p>
		<p>By creating a network of books, where the books are linked by its recommendations, 
			we have investigated the properties of the network and answered questions such as: 
			does links between a book and its related books end up creating a universe where few 
			books are very influential? Does it keep readers within the same genre? Or maybe no 
			patterns are present?</p>
		<p>
	</div>
	<div class="a">
		<p><em>I’ve only heard bad about this book, but it has a very high rating, how can this be?</em></p>
	</div>

	<div class="b">
		<p>You sometimes run into books that are simply horrible, but its rating is very high and you start 
			questioning yourself: Does the rating really reflect the readers actual opinion – who knows 
			maybe it’s just a computer program that gives thousands of 5-star ratings to specific books. 
			Under the hypothesis that people’s true opinions are reflected in the comments we have investigated 
			how well the rating reflect people’s opinions. We further investigate if other quantitative measures 
			provide a better estimate of book quality or if you really must sit down and read the comments.</p>
	</div>
	
	
      	<img src="Images/goodreads.png" alt="Network (Image)" class="smallimage" > 
</div>	

<!-- ************* Info on About page ************* --> 
<div id="About" class="tabcontent">
	<h2> About the project </h2>
	<p> On this page you can explore our main findings from investigating how one book is related with the books that 
	are recommended on on Goodreads, an online database of books. We have investigated if 
	the list of recommendations creates a network, where the same book is recommended all the 
	time making some books highly influential in the literary society. We have further investigated if books are mainly recommended 
	other books within the same genre, which could limit readers to one sub-category of books. Read about this under the section
	'Network'. </p>
	<p> In addition to investigating the relationsship between books, we have investigated how correlated a books rating is, 
	with the sentiment score of the book reviews. Our hypothesis was that highly rating books have a higher sentiment score in 
	the reviews than a poorly rated book. The network analysis and sentiment analysis is be tied together when investigating 
	whether the most influential books in the network are also some of the books with highest sentiment or if it is something 
	else that drives the high degree nodes. Read about this under the section 'Sentiment'.
		
	<h3> Datasets </h3>
	<p> The information about the books are as mentioned retrieved from Goodreads. Goodreads is chosen as it holds 
	information about almost every book and therefore creates a good platform to generate uniform data across the 
	list of books. Goodreads further contains reviews of each book, which are crucial for second part of the analysis. </p>
	
	<p> The books chosen are taken from the list <a href="https://www.goodreads.com/list/show/264.Books_That_Everyone_Should_Read_At_Least_Once">"Books Everyone Should Read At Least Once"</a> 
	referred to throughout this page as positive books. The list contains 21.618 books (However we have only retrieved around 2.000). 
	To create the sentiment analysis we also needed poorly rated books. These we obtained from
	<a href="https://www.goodreads.com/list/show/23974.Worst_Rated_Books_on_Goodreads">Worst Rated Books on Goodreads</a>	 
	referred to as negative books. This list contains 416 books, which are all retrieved. </p>

	<p> Here is a table illustrating the structure of the data for five books </p>
	
	<table border="1" id="table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>title</th>
      <th>author</th>
      <th>genre</th>
      <th>rating</th>
      <th>rating_count</th>
      <th>related</th>
	    <th>review</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>To Kill a Mockingbird</td>
      <td>Harper Lee</td>
      <td>Classics</td>
      <td>4.27</td>
      <td>4058926</td>
      <td>[Harry Potter and the Deathly Hallows, ... ]</td>
	    <td> Reviews as strings </td>
    </tr>
    <tr>
      <td>1</td>
      <td>Harry Potter and the Sorcerer's Stone</td>
      <td>J.K. Rowling</td>
      <td>Fantasy</td>
      <td>4.47</td>
      <td>6186514</td>
      <td>[Lord of the Flies, ... ]</td>
	    <td> Reviews as strings </td>
    </tr>
    <tr>
      <td>2</td>
      <td>Pride and Prejudice</td>
      <td>Jane Austen</td>
      <td>Classics</td>
      <td>4.25</td>
      <td>2662196</td>
      <td>[Harry Potter and the Deathly Hallows,... ]</td>
	    <td> Reviews as strings </td>
    </tr>
    <tr>
      <td>3</td>
      <td>The Diary of a Young Girl</td>
      <td>Anne Frank</td>
      <td>Nonfiction</td>
      <td>4.13</td>
      <td>2474246</td>
      <td>[Lord of the Flies,... ]</td>
	<td> Reviews as strings </td>
    </tr>
    <tr>
      <td>4</td>
      <td>1984</td>
      <td>George Orwell</td>
      <td>Classics</td>
      <td>4.17</td>
      <td>2711604</td>
      <td>[The Handmaid's Tale,...]</td>
	    <td> Reviews as strings </td>
    </tr>
  </tbody>
</table>

	<h3> Disclaimer </h3>
	<p> Due to limited time and limited compute power, the analysis that is the basis for the results presented on this website
	is based on a limited dataset. In the network section 1,978 books are used and only recomendations to other books in this
	list are considered. In the text-analysis section a subset of 450 books from the books used in the network section as well
	as 450 low rated books are used. For each book we have only retrieved 15 reviews. This may affect the results, but
	we will not comment further on this. </p>
</div> 	
	
<!-- ************* Info on Network page ************* --> 
<div id="Network" class="tabcontent">
  <h2>Network</h2>
  <p>We have created a network, where each of the books from the possitive list is a node and where two nodes are connected
	if one books has the other under the section 'Readers also enjoyed'. We have created the network as a directed network.
	This means that a node is only connected to the nodes it recomends - not the nodes that recomends that node.</p> 
	<p> We hereby get a network of 1,917 nodes and 10,001 edges. </p>
	<p> With the network we investigate the degree distribution, which basically means that we investigate how many times each book 
		has been recomended. The node with the highest degree (and thereby is the most recomended) is Harry Potter and the Deathly Hallows 
		with degree 535. This means that Harry Potter and the Deathly Hallows is recommended for 25.95% of the books 
		on the list. The average degree is 10.43, and thus it is more than 10 times more likely that harry potter is recommended than
		an average book. </p>
	<p> The figure underneath illustrates the degree distribution for all the books in the positive list. 
		It illustrates that few books have a very large degree while the majority of the books are have a degree under 50. 
		This indicates that there are a few select books that gets recommended for almost every other book on the list. </p>
	
	<img src="Images/usa_mask.jpg" alt="Degree distribution (image)" class="smallimage" > 
	
	<p> Other than degree, we also have other ways to quantify how influential a node is to the network. We have investigated
		the network with regards to betweenness centrality and eigenvector centrality. Betweenness centrality is a meassure 
		of how many shortest paths passses through a given node. For our network a high betweenness centrality would indicate 
		a gateway book, meaning if you read book A you may not be recommended book B, but you get recommended book C. 
		Book C will then recommend you book B, and the only reason you read book B is therefore because you also read book C. 
		This makes book C very influential. Eigenvector centrality is also an indicator for how influential a node is. 
		A node gets a high score if its neighboring node also have a high score. This would for our network mean that a node
		with a high eigenvector centrality is being recomended by other books that many other books recomend.
		A book with high degree but low eigenvector centrality could therefore be a book that is recommended alot, 
		but these are not them self are recomended very few times. </p>

	<p> Here the network is shown, where the nodesize for each node representing the book is set proportional to the degree, 
		betweenness centrality and eigenvector centrality respectively. You can choose which one you want to see by selecting
		each one. If you hover over the illustrations you are able to see what book each node represents - you can also
		zoom in on the images etc. </p>
	
	<div class="cont">
  		<div class="tab">
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Network')">Degree</button>
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Between')">Betweenness</button>
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Eigen')">Eigenvector</button>
			</div>
		<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="Code/Plots/G_degree.html" height="700" width=100%></iframe> 
		<p> 	In this illustration the nodesize is set proportional to each nodes total indegree. This means that the 
			larger the node more frequent the book is recomended. For example we see Harry Potter and the Deathly 
			Hallows has an indegree of 535. </p>
	</div>	
	
	<p> In the table below we see the 10 nodes with highest degree and the corresponding measures. </p>
	<h3> insert table </h3>
	<p> Some interesting remarks can be made from the table above. Looking at entry 8 we see that even though it has 
		a smaller degree than 6 the betweenness centrality meassure is almost 10 times bigger. This indicates that 
		"The Elephant Tree" tends to be recommeneded through fewer iterations than "Watership Down" do. Further, 
		it is noticed that "The Elephant Tree" at enty 8 has a higher eigenvector centrality than all others on the list. 
		This shows that "The Elephant Tree" recommends the popular books more. </p>
	
	<h3> Communities based on genre </h3>
	<p> We have now seen that some books does get recomended much more than the average book and therefore could be classified as 
		highly influential in the literary society. But now lets turn our attention to investigate if the network contains 
		clear groups - in network theory called communities. Our hypothesis was that a book is more likely to be recomended
		by another book if they are in the same genre, and thus each genre would be a small community in the network. </p>
	<p> From the list of books we have 66 different genres. However many of the genres consists of very few books. 
		We have therefore 
		only considered the 15 largest and collected the books in the others in a new genre called "Miscellaneous". </p>
	<p> With the updated genrelist, we have investigate how well our hyphothesis holds using a modularity score. This is a score 
		ranging from -1 to 1 indicating how well the hypothesized communities, actually are small communities in the network. 
	 	The closer to 1 the better the partition is. </p>
	<p> Partitioning on genre the modularity score for the network is <u> 0.53 </u>.  </p>
	<p> This is considered a high score, but to actually tell something about how good partitioning on genre is, you must investigate 
		how well it is possible to partition your network. There are several algorithms that does this. One of them is the louvrain algorithm, 
		which based on the network identifies the best fitting communities. </p>
	<p> From the confusion matrix we see that the algorithm does output communities that are consistent with the genres 
		and thus genre seems like a good representative of communities, considering the network. We do, however, see that the 
		modularity score is increased a lot (froom 0.33 to 0.68) when using the Louvrain algorithm. </p>
	
	<img src="Images/usa_mask.jpg" alt="Confusion matrix (image)" class="smallimage" > 
	
	<p> We remind our self that the network consists nodes with very high degree, which may influence the results heavily, 
		as these most likely are recommended by books from all genres. We investigate if this is the case by considering a subgraph, 
		where the nodes in the top 1 percentile degree are removed. </p>
		
	<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="Code/Plots/G_degree.html" height="400" width=60%></iframe> 
	
	<p> On this network it is very clear to se that there are communities based on genre. To say that books generally 
		recommends books within the same genre and therefore to some extend limits readers within a sub-category, is 
		therefore true. </p>

</div>	
	
<div id="Between" class="tabcontent">
  <h3>Network</h3>
  <p>Text.</p> 	
	<div class="cont">
  		<div class="tab">
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Network')"id="defaultOpen">Degree</button>
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Between')">Between</button>
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Eigen')">Eigen</button>
			</div>
		<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="Code/Plots/G_between.html" height="600" width=100%></iframe> 		<p> 	In this illustration the nodesize is set proportional to each nodes betweenness centrality, which 
			is a measure of how likely it is that given to random nodes in the network, the shortest path between
			them passes through the node. In this illustration it is even more clear how influential 
			Harry Potter and the Deathly Hallows it to the network. With a betweenness centrality of 0.0161 it has more 
			than double as high betweenness centrality than the second highest and more than 250 times higher than the
			average.
		</p>
	</div>	
  <h3>Network</h3>
  <p>Text.</p> 	
</div>	

<div id="Eigen" class="tabcontent">
  <h3>Network</h3>
  <p>Text.</p> 	
	<div class="cont">
  		<div class="tab">
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Network')"id="defaultOpen">Degree</button>
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Between')">Between</button>
				<button class="tablinks" style=width:33.33%; onclick="openCity(event, 'Eigen')">Eigen</button>
			</div>
		<iframe id="igraph" scrolling="no" style="border:none;" seamless="seamless" src="Code/Plots/G_eigen.html" height="600" width=100%></iframe> 
		<p> 	In this illustration the nodesize is set proportional to each nodes eigenvector, which
			is also an indicator for how influential a node is. A node gets a high eigenvector centrality score 
			if its neighboring node also have a high score. Very interestingly the illustration shows that the network does not
			have any nodes scoring very high eigenvector centrality. This is because almost all books recomend the same books, and 
			thus acording to eigenvector centrality all the books have equal influence, which is though not true (see degree and 
			betweenness centrality).
		</p>
	</div>	 
  <h3>Network</h3>
  <p>Text.</p> 	
</div>	
																																																							

		
<!-- ************* Info on sentiment page ************* -->
<div id="Sentiment" class="tabcontent">
  <h2>Text Analysis</h2>
  <p>On Goodreads users are able to write reviews on the books and many do. We have investigated these rewievs using sentiment
	  analysis and further investigated the word precalence of those classified as very positive and very negative 
	  respectively. Comparing each books sentiment score with the ratings we have investigated if how well these match. </p>
	<p> In the text analysis, we have included the books from the negative book list. The analysis therefore consists of books
		both with very high average rating and very low average rating. <p>
	<h4> Sentiment </h4>
	We have first investigated the reviews with sentiment analysis, which is a method of quantifying how positive a text is. 
	We have used the VADER (Valence Aware Dictionary and sEntiment Reasoner) sentiment, which is a lexicon and rule-based 
	sentiment analysis tool that is specifically attuned to sentiments expressed in social media. Though the reviews are different
	than text from social media, many of the main features are the same and we have therefore identified this method to be the 
	most appropriate.</p>
	<p> Here you see the distribution of sentiment score. We have grouped the books the the positive list and the books from the
		negative list to provide an initial expression of wheter ratings and sentiment match. </p>
	
	<img src="Images/usa_mask.jpg" alt="Sentiment distributions" class="smallimage"> 
	
	<p> As expected we see that the books from the negative list generally scores lower than the books from the positive 
		list. However, from the illustration we also see that some books from the negative list scores wrose than the 
		average 'bad' book, and some of the books from the positive list scores higher than the average 'good' book. </p>
	<p> The books are classified as very negative and very positive as the books that scored below the 5<sub>th</sub> 
		percentile and above the 95<sub>th</sub> percentile respectively.</p>
	<p> With the information retrieval method, TD-IDF (term frequency–inverse document frequency) we have investigated the 
		word precalence for the very negative and very positive books. The TD-IDF score is calculated as the frekvency
		a word is present in a document (here all the reviews in one group) adjusted with how used the word is across all
		groups. The results are respresented in these wordclouds </p>
	<div class="row">
  		<div class="column" id="img1">
        			<img src="Images/usa_mask.jpg" alt="Wordcloud for very positive books" class="image"> 
        			<div class="overlay">Very positive books</div>
  		</div>
  		<div class="column" id="img2">
        			<img src="Images/usa_mask.jpg" alt="Wordcloud for very negative books" class="image"> 
        			<div class="overlay">Very negative books</div>
  		</div>
	</div>	


</div>

<!-- ************* Info on code page ************* -->
<div id="Code" class="tabcontent">
	<div class="row">
  		<div class="column" id="img1">
    				<a href="https://github.com/benj1003/Goodreads_network/blob/master/Code/Final%20project.ipynb">	
        			<img src="Images/Explainer_notebook.PNG" alt="Link to explainer notebook" class="image"> 
        			<div class="overlay">Click to open the Explainer notebook</div>
  		</div>
  		<div class="column" id="img2">
    				<a href="https://github.com/benj1003/Goodreads_network/tree/master/Code">	
        			<img src="Images/Github folder.png" alt="Link to code folder" class="image"> 
        			<div class="overlay">Click to go to code folder</div>
  		</div>
	</div>	
</div>  


<!-- ************************************************************************************************************* -->
<!-- **********************************Functions used************************************************************* -->
<!-- ************************************************************************************************************* -->
<script>
function openCity(evt, Name) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");  
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }	
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }	
  document.getElementById(Name).style.display = "block";	
  evt.currentTarget.className += " active";
}

  
// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>
   
</body>
</html> 
